'use strict';/*
 * Mocha test of cs142 Project #7 web server session and input API.  To run type
 *   node_modules/.bin/mocha sessionInputApiTest.js
 */ /* jshint node: true */function cov_2ajrhtvu7f(){var path="/Users/dilannana/Dropbox/Winter2020-21/CS142/HW7/project7/test/sessionInputApiTest.js";var hash="0b6249a24074254138ed6ae7d4740a979ed25551";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/dilannana/Dropbox/Winter2020-21/CS142/HW7/project7/test/sessionInputApiTest.js",statementMap:{"0":{start:{line:8,column:13},end:{line:8,column:30}},"1":{start:{line:9,column:11},end:{line:9,column:26}},"2":{start:{line:10,column:12},end:{line:10,column:28}},"3":{start:{line:11,column:8},end:{line:11,column:25}},"4":{start:{line:12,column:9},end:{line:12,column:22}},"5":{start:{line:13,column:14},end:{line:13,column:32}},"6":{start:{line:15,column:18},end:{line:15,column:65}},"7":{start:{line:17,column:11},end:{line:17,column:15}},"8":{start:{line:18,column:11},end:{line:18,column:22}},"9":{start:{line:22,column:4},end:{line:22,column:47}},"10":{start:{line:27,column:4},end:{line:27,column:63}},"11":{start:{line:36,column:15},end:{line:36,column:48}},"12":{start:{line:37,column:4},end:{line:37,column:20}},"13":{start:{line:38,column:4},end:{line:38,column:20}},"14":{start:{line:39,column:4},end:{line:39,column:16}},"15":{start:{line:42,column:0},end:{line:349,column:3}},"16":{start:{line:45,column:4},end:{line:137,column:7}},"17":{start:{line:48,column:8},end:{line:55,column:11}},"18":{start:{line:49,column:12},end:{line:53,column:15}},"19":{start:{line:50,column:16},end:{line:50,column:31}},"20":{start:{line:51,column:16},end:{line:51,column:94}},"21":{start:{line:52,column:16},end:{line:52,column:23}},"22":{start:{line:57,column:8},end:{line:63,column:11}},"23":{start:{line:58,column:12},end:{line:62,column:15}},"24":{start:{line:59,column:16},end:{line:59,column:31}},"25":{start:{line:60,column:16},end:{line:60,column:94}},"26":{start:{line:61,column:16},end:{line:61,column:23}},"27":{start:{line:67,column:8},end:{line:73,column:11}},"28":{start:{line:68,column:12},end:{line:72,column:15}},"29":{start:{line:69,column:16},end:{line:69,column:31}},"30":{start:{line:70,column:16},end:{line:70,column:94}},"31":{start:{line:71,column:16},end:{line:71,column:23}},"32":{start:{line:75,column:8},end:{line:86,column:11}},"33":{start:{line:76,column:12},end:{line:84,column:15}},"34":{start:{line:82,column:16},end:{line:82,column:94}},"35":{start:{line:83,column:16},end:{line:83,column:23}},"36":{start:{line:89,column:8},end:{line:100,column:11}},"37":{start:{line:90,column:12},end:{line:98,column:15}},"38":{start:{line:96,column:16},end:{line:96,column:94}},"39":{start:{line:97,column:16},end:{line:97,column:23}},"40":{start:{line:102,column:8},end:{line:115,column:11}},"41":{start:{line:103,column:12},end:{line:103,column:52}},"42":{start:{line:104,column:12},end:{line:113,column:15}},"43":{start:{line:110,column:16},end:{line:110,column:31}},"44":{start:{line:111,column:16},end:{line:111,column:94}},"45":{start:{line:112,column:16},end:{line:112,column:23}},"46":{start:{line:117,column:8},end:{line:125,column:11}},"47":{start:{line:119,column:12},end:{line:123,column:15}},"48":{start:{line:120,column:16},end:{line:120,column:31}},"49":{start:{line:121,column:16},end:{line:121,column:94}},"50":{start:{line:122,column:16},end:{line:122,column:23}},"51":{start:{line:127,column:8},end:{line:136,column:11}},"52":{start:{line:129,column:12},end:{line:133,column:15}},"53":{start:{line:130,column:16},end:{line:130,column:31}},"54":{start:{line:131,column:16},end:{line:131,column:94}},"55":{start:{line:132,column:16},end:{line:132,column:23}},"56":{start:{line:139,column:4},end:{line:225,column:7}},"57":{start:{line:143,column:29},end:{line:143,column:52}},"58":{start:{line:147,column:8},end:{line:161,column:11}},"59":{start:{line:148,column:12},end:{line:148,column:52}},"60":{start:{line:149,column:12},end:{line:159,column:15}},"61":{start:{line:155,column:16},end:{line:155,column:31}},"62":{start:{line:156,column:16},end:{line:156,column:94}},"63":{start:{line:157,column:16},end:{line:157,column:35}},"64":{start:{line:158,column:16},end:{line:158,column:23}},"65":{start:{line:163,column:8},end:{line:175,column:11}},"66":{start:{line:164,column:12},end:{line:173,column:15}},"67":{start:{line:169,column:16},end:{line:169,column:31}},"68":{start:{line:170,column:16},end:{line:170,column:94}},"69":{start:{line:171,column:16},end:{line:171,column:30}},"70":{start:{line:172,column:16},end:{line:172,column:23}},"71":{start:{line:177,column:8},end:{line:191,column:11}},"72":{start:{line:178,column:12},end:{line:178,column:38}},"73":{start:{line:179,column:12},end:{line:179,column:41}},"74":{start:{line:180,column:12},end:{line:189,column:15}},"75":{start:{line:186,column:16},end:{line:186,column:31}},"76":{start:{line:187,column:16},end:{line:187,column:94}},"77":{start:{line:188,column:16},end:{line:188,column:23}},"78":{start:{line:193,column:8},end:{line:205,column:11}},"79":{start:{line:194,column:12},end:{line:203,column:15}},"80":{start:{line:199,column:16},end:{line:199,column:31}},"81":{start:{line:200,column:16},end:{line:200,column:94}},"82":{start:{line:201,column:16},end:{line:201,column:31}},"83":{start:{line:202,column:16},end:{line:202,column:23}},"84":{start:{line:207,column:8},end:{line:212,column:11}},"85":{start:{line:208,column:27},end:{line:208,column:59}},"86":{start:{line:209,column:12},end:{line:209,column:51}},"87":{start:{line:210,column:12},end:{line:210,column:90}},"88":{start:{line:211,column:12},end:{line:211,column:19}},"89":{start:{line:214,column:8},end:{line:223,column:11}},"90":{start:{line:216,column:12},end:{line:220,column:15}},"91":{start:{line:217,column:16},end:{line:217,column:31}},"92":{start:{line:218,column:16},end:{line:218,column:94}},"93":{start:{line:219,column:16},end:{line:219,column:23}},"94":{start:{line:227,column:4},end:{line:290,column:7}},"95":{start:{line:230,column:30},end:{line:230,column:73}},"96":{start:{line:232,column:8},end:{line:246,column:11}},"97":{start:{line:233,column:12},end:{line:233,column:52}},"98":{start:{line:234,column:12},end:{line:244,column:15}},"99":{start:{line:240,column:16},end:{line:240,column:31}},"100":{start:{line:241,column:16},end:{line:241,column:94}},"101":{start:{line:242,column:16},end:{line:242,column:35}},"102":{start:{line:243,column:16},end:{line:243,column:23}},"103":{start:{line:248,column:8},end:{line:270,column:11}},"104":{start:{line:250,column:27},end:{line:258,column:13}},"105":{start:{line:259,column:12},end:{line:269,column:15}},"106":{start:{line:263,column:16},end:{line:266,column:17}},"107":{start:{line:264,column:20},end:{line:264,column:27}},"108":{start:{line:265,column:20},end:{line:265,column:64}},"109":{start:{line:267,column:16},end:{line:267,column:94}},"110":{start:{line:268,column:16},end:{line:268,column:23}},"111":{start:{line:272,column:8},end:{line:287,column:11}},"112":{start:{line:273,column:12},end:{line:285,column:15}},"113":{start:{line:278,column:16},end:{line:278,column:31}},"114":{start:{line:279,column:16},end:{line:279,column:94}},"115":{start:{line:280,column:31},end:{line:282,column:18}},"116":{start:{line:281,column:20},end:{line:281,column:62}},"117":{start:{line:283,column:16},end:{line:283,column:62}},"118":{start:{line:284,column:16},end:{line:284,column:23}},"119":{start:{line:293,column:4},end:{line:345,column:7}},"120":{start:{line:294,column:33},end:{line:294,column:67}},"121":{start:{line:295,column:8},end:{line:318,column:11}},"122":{start:{line:296,column:12},end:{line:296,column:52}},"123":{start:{line:298,column:25},end:{line:306,column:13}},"124":{start:{line:307,column:12},end:{line:316,column:15}},"125":{start:{line:313,column:16},end:{line:313,column:31}},"126":{start:{line:314,column:16},end:{line:314,column:94}},"127":{start:{line:315,column:16},end:{line:315,column:23}},"128":{start:{line:320,column:8},end:{line:343,column:11}},"129":{start:{line:321,column:12},end:{line:321,column:52}},"130":{start:{line:323,column:25},end:{line:331,column:13}},"131":{start:{line:332,column:12},end:{line:341,column:15}},"132":{start:{line:338,column:16},end:{line:338,column:31}},"133":{start:{line:339,column:16},end:{line:339,column:94}},"134":{start:{line:340,column:16},end:{line:340,column:23}}},fnMap:{"0":{name:"makeFullUrl",decl:{start:{line:20,column:9},end:{line:20,column:20}},loc:{start:{line:20,column:26},end:{line:23,column:1}},line:20},"1":{name:"assertEqualDates",decl:{start:{line:25,column:9},end:{line:25,column:25}},loc:{start:{line:25,column:34},end:{line:28,column:1}},line:25},"2":{name:"removeMongoProperties",decl:{start:{line:35,column:9},end:{line:35,column:30}},loc:{start:{line:35,column:38},end:{line:40,column:1}},line:35},"3":{name:"(anonymous_3)",decl:{start:{line:42,column:53},end:{line:42,column:54}},loc:{start:{line:42,column:65},end:{line:349,column:1}},line:42},"4":{name:"(anonymous_4)",decl:{start:{line:45,column:52},end:{line:45,column:53}},loc:{start:{line:45,column:68},end:{line:137,column:5}},line:45},"5":{name:"(anonymous_5)",decl:{start:{line:48,column:63},end:{line:48,column:64}},loc:{start:{line:48,column:79},end:{line:55,column:9}},line:48},"6":{name:"(anonymous_6)",decl:{start:{line:49,column:47},end:{line:49,column:48}},loc:{start:{line:49,column:80},end:{line:53,column:13}},line:49},"7":{name:"(anonymous_7)",decl:{start:{line:57,column:58},end:{line:57,column:59}},loc:{start:{line:57,column:74},end:{line:63,column:9}},line:57},"8":{name:"(anonymous_8)",decl:{start:{line:58,column:44},end:{line:58,column:45}},loc:{start:{line:58,column:77},end:{line:62,column:13}},line:58},"9":{name:"(anonymous_9)",decl:{start:{line:67,column:59},end:{line:67,column:60}},loc:{start:{line:67,column:75},end:{line:73,column:9}},line:67},"10":{name:"(anonymous_10)",decl:{start:{line:68,column:52},end:{line:68,column:53}},loc:{start:{line:68,column:85},end:{line:72,column:13}},line:68},"11":{name:"(anonymous_11)",decl:{start:{line:75,column:56},end:{line:75,column:57}},loc:{start:{line:75,column:71},end:{line:86,column:9}},line:75},"12":{name:"(anonymous_12)",decl:{start:{line:81,column:15},end:{line:81,column:16}},loc:{start:{line:81,column:48},end:{line:84,column:13}},line:81},"13":{name:"(anonymous_13)",decl:{start:{line:89,column:72},end:{line:89,column:73}},loc:{start:{line:89,column:87},end:{line:100,column:9}},line:89},"14":{name:"(anonymous_14)",decl:{start:{line:95,column:15},end:{line:95,column:16}},loc:{start:{line:95,column:48},end:{line:98,column:13}},line:95},"15":{name:"(anonymous_15)",decl:{start:{line:102,column:74},end:{line:102,column:75}},loc:{start:{line:102,column:89},end:{line:115,column:9}},line:102},"16":{name:"(anonymous_16)",decl:{start:{line:109,column:15},end:{line:109,column:16}},loc:{start:{line:109,column:48},end:{line:113,column:13}},line:109},"17":{name:"(anonymous_17)",decl:{start:{line:117,column:47},end:{line:117,column:48}},loc:{start:{line:117,column:62},end:{line:125,column:9}},line:117},"18":{name:"(anonymous_18)",decl:{start:{line:119,column:47},end:{line:119,column:48}},loc:{start:{line:119,column:80},end:{line:123,column:13}},line:119},"19":{name:"(anonymous_19)",decl:{start:{line:127,column:40},end:{line:127,column:41}},loc:{start:{line:127,column:55},end:{line:136,column:9}},line:127},"20":{name:"(anonymous_20)",decl:{start:{line:129,column:55},end:{line:129,column:56}},loc:{start:{line:129,column:88},end:{line:133,column:13}},line:129},"21":{name:"(anonymous_21)",decl:{start:{line:139,column:41},end:{line:139,column:42}},loc:{start:{line:139,column:57},end:{line:225,column:5}},line:139},"22":{name:"(anonymous_22)",decl:{start:{line:147,column:43},end:{line:147,column:44}},loc:{start:{line:147,column:58},end:{line:161,column:9}},line:147},"23":{name:"(anonymous_23)",decl:{start:{line:154,column:15},end:{line:154,column:16}},loc:{start:{line:154,column:48},end:{line:159,column:13}},line:154},"24":{name:"(anonymous_24)",decl:{start:{line:163,column:35},end:{line:163,column:36}},loc:{start:{line:163,column:50},end:{line:175,column:9}},line:163},"25":{name:"(anonymous_25)",decl:{start:{line:168,column:15},end:{line:168,column:16}},loc:{start:{line:168,column:48},end:{line:173,column:13}},line:168},"26":{name:"(anonymous_26)",decl:{start:{line:177,column:55},end:{line:177,column:56}},loc:{start:{line:177,column:70},end:{line:191,column:9}},line:177},"27":{name:"(anonymous_27)",decl:{start:{line:185,column:15},end:{line:185,column:16}},loc:{start:{line:185,column:48},end:{line:189,column:13}},line:185},"28":{name:"(anonymous_28)",decl:{start:{line:193,column:41},end:{line:193,column:42}},loc:{start:{line:193,column:56},end:{line:205,column:9}},line:193},"29":{name:"(anonymous_29)",decl:{start:{line:198,column:15},end:{line:198,column:16}},loc:{start:{line:198,column:48},end:{line:203,column:13}},line:198},"30":{name:"(anonymous_30)",decl:{start:{line:207,column:41},end:{line:207,column:42}},loc:{start:{line:207,column:57},end:{line:212,column:9}},line:207},"31":{name:"(anonymous_31)",decl:{start:{line:214,column:40},end:{line:214,column:41}},loc:{start:{line:214,column:55},end:{line:223,column:9}},line:214},"32":{name:"(anonymous_32)",decl:{start:{line:216,column:55},end:{line:216,column:56}},loc:{start:{line:216,column:88},end:{line:220,column:13}},line:216},"33":{name:"(anonymous_33)",decl:{start:{line:227,column:50},end:{line:227,column:51}},loc:{start:{line:227,column:66},end:{line:290,column:5}},line:227},"34":{name:"(anonymous_34)",decl:{start:{line:232,column:43},end:{line:232,column:44}},loc:{start:{line:232,column:59},end:{line:246,column:9}},line:232},"35":{name:"(anonymous_35)",decl:{start:{line:239,column:15},end:{line:239,column:16}},loc:{start:{line:239,column:48},end:{line:244,column:13}},line:239},"36":{name:"(anonymous_36)",decl:{start:{line:248,column:33},end:{line:248,column:34}},loc:{start:{line:248,column:49},end:{line:270,column:9}},line:248},"37":{name:"optionalCallback",decl:{start:{line:262,column:24},end:{line:262,column:40}},loc:{start:{line:262,column:62},end:{line:269,column:13}},line:262},"38":{name:"(anonymous_38)",decl:{start:{line:272,column:42},end:{line:272,column:43}},loc:{start:{line:272,column:57},end:{line:287,column:9}},line:272},"39":{name:"(anonymous_39)",decl:{start:{line:277,column:15},end:{line:277,column:16}},loc:{start:{line:277,column:48},end:{line:285,column:13}},line:277},"40":{name:"(anonymous_40)",decl:{start:{line:280,column:45},end:{line:280,column:46}},loc:{start:{line:280,column:58},end:{line:282,column:17}},line:280},"41":{name:"(anonymous_41)",decl:{start:{line:293,column:46},end:{line:293,column:47}},loc:{start:{line:293,column:62},end:{line:345,column:5}},line:293},"42":{name:"(anonymous_42)",decl:{start:{line:295,column:36},end:{line:295,column:37}},loc:{start:{line:295,column:51},end:{line:318,column:9}},line:295},"43":{name:"(anonymous_43)",decl:{start:{line:312,column:15},end:{line:312,column:16}},loc:{start:{line:312,column:48},end:{line:316,column:13}},line:312},"44":{name:"(anonymous_44)",decl:{start:{line:320,column:42},end:{line:320,column:43}},loc:{start:{line:320,column:57},end:{line:343,column:9}},line:320},"45":{name:"(anonymous_45)",decl:{start:{line:337,column:15},end:{line:337,column:16}},loc:{start:{line:337,column:48},end:{line:341,column:13}},line:337}},branchMap:{"0":{loc:{start:{line:263,column:16},end:{line:266,column:17}},type:"if",locations:[{start:{line:263,column:16},end:{line:266,column:17}},{start:{line:263,column:16},end:{line:266,column:17}}],line:263}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0b6249a24074254138ed6ae7d4740a979ed25551"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2ajrhtvu7f=function(){return actualCoverage;};}return actualCoverage;}cov_2ajrhtvu7f();var assert=(cov_2ajrhtvu7f().s[0]++,require('assert'));var http=(cov_2ajrhtvu7f().s[1]++,require('http'));var async=(cov_2ajrhtvu7f().s[2]++,require('async'));var _=(cov_2ajrhtvu7f().s[3]++,require('lodash'));var fs=(cov_2ajrhtvu7f().s[4]++,require('fs'));var request=(cov_2ajrhtvu7f().s[5]++,require('request'));var cs142models=(cov_2ajrhtvu7f().s[6]++,require('../modelData/photoApp.js').cs142models);var port=(cov_2ajrhtvu7f().s[7]++,3000);var host=(cov_2ajrhtvu7f().s[8]++,'localhost');function makeFullUrl(url){cov_2ajrhtvu7f().f[0]++;cov_2ajrhtvu7f().s[9]++;return'http://'+host+':'+port+url;}function assertEqualDates(d1,d2){cov_2ajrhtvu7f().f[1]++;cov_2ajrhtvu7f().s[10]++;return new Date(d1).valueOf()===new Date(d2).valueOf();}/*
 * MongoDB automatically adds some properties to our models. We allow
 * these to appear by removing them when before checking
 * for invalid properties.  This way the models are permitted but
 * not required to have these properties.
 */function removeMongoProperties(model){cov_2ajrhtvu7f().f[2]++;var copy=(cov_2ajrhtvu7f().s[11]++,JSON.parse(JSON.stringify(model)));cov_2ajrhtvu7f().s[12]++;delete copy._id;cov_2ajrhtvu7f().s[13]++;delete copy.__v;cov_2ajrhtvu7f().s[14]++;return copy;}cov_2ajrhtvu7f().s[15]++;describe('CS142 Photo App Session and Input API - ',function(){cov_2ajrhtvu7f().f[3]++;cov_2ajrhtvu7f().s[16]++;describe('test /admin/login and /admin/logout',function(done){cov_2ajrhtvu7f().f[4]++;cov_2ajrhtvu7f().s[17]++;it('errors getting the list of user if not logged in',function(done){cov_2ajrhtvu7f().f[5]++;cov_2ajrhtvu7f().s[18]++;request(makeFullUrl('/user/list'),function(error,response,body){cov_2ajrhtvu7f().f[6]++;cov_2ajrhtvu7f().s[19]++;assert(!error);cov_2ajrhtvu7f().s[20]++;assert.strictEqual(response.statusCode,401,'HTTP response status code 401');cov_2ajrhtvu7f().s[21]++;done();});});cov_2ajrhtvu7f().s[22]++;it('errors getting user detail if not logged in',function(done){cov_2ajrhtvu7f().f[7]++;cov_2ajrhtvu7f().s[23]++;request(makeFullUrl('/user/1'),function(error,response,body){cov_2ajrhtvu7f().f[8]++;cov_2ajrhtvu7f().s[24]++;assert(!error);cov_2ajrhtvu7f().s[25]++;assert.strictEqual(response.statusCode,401,'HTTP response status code 401');cov_2ajrhtvu7f().s[26]++;done();});});cov_2ajrhtvu7f().s[27]++;it('errors getting photosOfUser if not logged in',function(done){cov_2ajrhtvu7f().f[9]++;cov_2ajrhtvu7f().s[28]++;request(makeFullUrl('/photosOfUser/1'),function(error,response,body){cov_2ajrhtvu7f().f[10]++;cov_2ajrhtvu7f().s[29]++;assert(!error);cov_2ajrhtvu7f().s[30]++;assert.strictEqual(response.statusCode,401,'HTTP response status code 401');cov_2ajrhtvu7f().s[31]++;done();});});cov_2ajrhtvu7f().s[32]++;it('rejects logins to non-existent login_name',function(done){cov_2ajrhtvu7f().f[11]++;cov_2ajrhtvu7f().s[33]++;request({method:"POST",json:true,body:{login_name:"notValid"},url:'http://'+host+':'+port+'/admin/login'},function(error,response,body){cov_2ajrhtvu7f().f[12]++;cov_2ajrhtvu7f().s[34]++;assert.strictEqual(response.statusCode,400,'HTTP response status code 401');cov_2ajrhtvu7f().s[35]++;done();});});cov_2ajrhtvu7f().s[36]++;it('rejects logins to existing login_name with wrong password',function(done){cov_2ajrhtvu7f().f[13]++;cov_2ajrhtvu7f().s[37]++;request({method:"POST",json:true,body:{login_name:"took",password:"wrong"},url:'http://'+host+':'+port+'/admin/login'},function(error,response,body){cov_2ajrhtvu7f().f[14]++;cov_2ajrhtvu7f().s[38]++;assert.strictEqual(response.statusCode,400,'HTTP response status code 400');cov_2ajrhtvu7f().s[39]++;done();});});cov_2ajrhtvu7f().s[40]++;it('accepts logins to existing login_name with correct password',function(done){cov_2ajrhtvu7f().f[15]++;cov_2ajrhtvu7f().s[41]++;request=request.defaults({jar:true});cov_2ajrhtvu7f().s[42]++;request({method:"POST",json:true,body:{login_name:"took",password:"weak"},url:makeFullUrl('/admin/login')},function(error,response,body){cov_2ajrhtvu7f().f[16]++;cov_2ajrhtvu7f().s[43]++;assert(!error);cov_2ajrhtvu7f().s[44]++;assert.strictEqual(response.statusCode,200,'HTTP response status code 200');cov_2ajrhtvu7f().s[45]++;done();});});cov_2ajrhtvu7f().s[46]++;it('can get user list when logged in',function(done){cov_2ajrhtvu7f().f[17]++;cov_2ajrhtvu7f().s[47]++;request(makeFullUrl('/user/list'),function(error,response,body){cov_2ajrhtvu7f().f[18]++;cov_2ajrhtvu7f().s[48]++;assert(!error);cov_2ajrhtvu7f().s[49]++;assert.strictEqual(response.statusCode,200,'HTTP response status code 200');cov_2ajrhtvu7f().s[50]++;done();});});cov_2ajrhtvu7f().s[51]++;it('can logout when logged in',function(done){cov_2ajrhtvu7f().f[19]++;cov_2ajrhtvu7f().s[52]++;request.post(makeFullUrl('/admin/logout'),function(error,response,body){cov_2ajrhtvu7f().f[20]++;cov_2ajrhtvu7f().s[53]++;assert(!error);cov_2ajrhtvu7f().s[54]++;assert.strictEqual(response.statusCode,200,'HTTP response status code 200');cov_2ajrhtvu7f().s[55]++;done();});});});cov_2ajrhtvu7f().s[56]++;describe('test /commentsOfPhoto/id',function(done){cov_2ajrhtvu7f().f[21]++;var user_id;var photos,photos2;var newCommentText=(cov_2ajrhtvu7f().s[57]++,"this is a new comment");var photo_id;var originalPhoto;cov_2ajrhtvu7f().s[58]++;it('can login as took and get id',function(done){cov_2ajrhtvu7f().f[22]++;cov_2ajrhtvu7f().s[59]++;request=request.defaults({jar:true});cov_2ajrhtvu7f().s[60]++;request({method:"POST",json:true,body:{login_name:"took",password:"weak"},url:makeFullUrl('/admin/login')},function(error,response,body){cov_2ajrhtvu7f().f[23]++;cov_2ajrhtvu7f().s[61]++;assert(!error);cov_2ajrhtvu7f().s[62]++;assert.strictEqual(response.statusCode,200,'HTTP response status code 200');cov_2ajrhtvu7f().s[63]++;user_id=body._id;cov_2ajrhtvu7f().s[64]++;done();});});cov_2ajrhtvu7f().s[65]++;it('can get tooks photos',function(done){cov_2ajrhtvu7f().f[24]++;cov_2ajrhtvu7f().s[66]++;request({method:"GET",json:true,url:makeFullUrl('/photosOfUser/'+user_id)},function(error,response,body){cov_2ajrhtvu7f().f[25]++;cov_2ajrhtvu7f().s[67]++;assert(!error);cov_2ajrhtvu7f().s[68]++;assert.strictEqual(response.statusCode,200,'HTTP response status code 200');cov_2ajrhtvu7f().s[69]++;photos=body;cov_2ajrhtvu7f().s[70]++;done();});});cov_2ajrhtvu7f().s[71]++;it('can add a comment to the the first photo',function(done){cov_2ajrhtvu7f().f[26]++;cov_2ajrhtvu7f().s[72]++;originalPhoto=photos[0];cov_2ajrhtvu7f().s[73]++;photo_id=originalPhoto._id;cov_2ajrhtvu7f().s[74]++;request({method:"POST",json:true,body:{comment:newCommentText},url:makeFullUrl('/commentsOfPhoto/'+photo_id)},function(error,response,body){cov_2ajrhtvu7f().f[27]++;cov_2ajrhtvu7f().s[75]++;assert(!error);cov_2ajrhtvu7f().s[76]++;assert.strictEqual(response.statusCode,200,'HTTP response status code 200');cov_2ajrhtvu7f().s[77]++;done();});});cov_2ajrhtvu7f().s[78]++;it('can get tooks photos again',function(done){cov_2ajrhtvu7f().f[28]++;cov_2ajrhtvu7f().s[79]++;request({method:"GET",json:true,url:makeFullUrl('/photosOfUser/'+user_id)},function(error,response,body){cov_2ajrhtvu7f().f[29]++;cov_2ajrhtvu7f().s[80]++;assert(!error);cov_2ajrhtvu7f().s[81]++;assert.strictEqual(response.statusCode,200,'HTTP response status code 200');cov_2ajrhtvu7f().s[82]++;photos2=body;cov_2ajrhtvu7f().s[83]++;done();});});cov_2ajrhtvu7f().s[84]++;it('photo has one more comment',function(done){cov_2ajrhtvu7f().f[30]++;var newPhoto=(cov_2ajrhtvu7f().s[85]++,_.find(photos2,{_id:photo_id}));cov_2ajrhtvu7f().s[86]++;assert(newPhoto,'Can not find photo');cov_2ajrhtvu7f().s[87]++;assert.strictEqual(newPhoto.comments.length,originalPhoto.comments.length+1);cov_2ajrhtvu7f().s[88]++;done();});cov_2ajrhtvu7f().s[89]++;it('can logout when logged in',function(done){cov_2ajrhtvu7f().f[31]++;cov_2ajrhtvu7f().s[90]++;request.post(makeFullUrl('/admin/logout'),function(error,response,body){cov_2ajrhtvu7f().f[32]++;cov_2ajrhtvu7f().s[91]++;assert(!error);cov_2ajrhtvu7f().s[92]++;assert.strictEqual(response.statusCode,200,'HTTP response status code 200');cov_2ajrhtvu7f().s[93]++;done();});});});cov_2ajrhtvu7f().s[94]++;describe('upload photos -  post /photos/new',function(done){cov_2ajrhtvu7f().f[33]++;var user_id;var uniquePhotoName=(cov_2ajrhtvu7f().s[95]++,'p'+String(new Date().valueOf())+'.jpg');cov_2ajrhtvu7f().s[96]++;it('can login as took and get id',function(done){cov_2ajrhtvu7f().f[34]++;cov_2ajrhtvu7f().s[97]++;request=request.defaults({jar:true});cov_2ajrhtvu7f().s[98]++;request({method:"POST",json:true,body:{login_name:"took",password:"weak"},url:makeFullUrl('/admin/login')},function(error,response,body){cov_2ajrhtvu7f().f[35]++;cov_2ajrhtvu7f().s[99]++;assert(!error);cov_2ajrhtvu7f().s[100]++;assert.strictEqual(response.statusCode,200,'HTTP response status code 200');cov_2ajrhtvu7f().s[101]++;user_id=body._id;cov_2ajrhtvu7f().s[102]++;done();});});cov_2ajrhtvu7f().s[103]++;it('can upload a photo',function(done){cov_2ajrhtvu7f().f[36]++;var formData=(cov_2ajrhtvu7f().s[104]++,{uploadedphoto:{value:fs.createReadStream(__dirname+'/testPhoto.jpg'),options:{filename:uniquePhotoName,contentType:'image/jpg'}}});cov_2ajrhtvu7f().s[105]++;request.post({url:makeFullUrl('/photos/new'),formData:formData},function optionalCallback(err,response,body){cov_2ajrhtvu7f().f[37]++;cov_2ajrhtvu7f().s[106]++;if(err){cov_2ajrhtvu7f().b[0][0]++;cov_2ajrhtvu7f().s[107]++;done();cov_2ajrhtvu7f().s[108]++;return console.error('upload failed:',err);}else{cov_2ajrhtvu7f().b[0][1]++;}cov_2ajrhtvu7f().s[109]++;assert.strictEqual(response.statusCode,200,'HTTP response status code 200');cov_2ajrhtvu7f().s[110]++;done();});});cov_2ajrhtvu7f().s[111]++;it('can get the uploaded photo ',function(done){cov_2ajrhtvu7f().f[38]++;cov_2ajrhtvu7f().s[112]++;request({method:"GET",json:true,url:makeFullUrl('/photosOfUser/'+user_id)},function(error,response,body){cov_2ajrhtvu7f().f[39]++;cov_2ajrhtvu7f().s[113]++;assert(!error);cov_2ajrhtvu7f().s[114]++;assert.strictEqual(response.statusCode,200,'HTTP response status code 200');var newPhoto=(cov_2ajrhtvu7f().s[115]++,_.find(body,function(p){cov_2ajrhtvu7f().f[40]++;cov_2ajrhtvu7f().s[116]++;return p.file_name.match(uniquePhotoName);}));cov_2ajrhtvu7f().s[117]++;assert(newPhoto,"Can not find upload photo");cov_2ajrhtvu7f().s[118]++;done();});});});cov_2ajrhtvu7f().s[119]++;describe('register user - post to /user',function(done){cov_2ajrhtvu7f().f[41]++;var newUniqueLoginName=(cov_2ajrhtvu7f().s[120]++,'u'+String(new Date().valueOf()));cov_2ajrhtvu7f().s[121]++;it('can create a new user',function(done){cov_2ajrhtvu7f().f[42]++;cov_2ajrhtvu7f().s[122]++;request=request.defaults({jar:true});var params=(cov_2ajrhtvu7f().s[123]++,{login_name:newUniqueLoginName,password:'weak2',first_name:'Fn'+newUniqueLoginName,last_name:'Ln'+newUniqueLoginName,location:'Loc'+newUniqueLoginName,description:'Desc'+newUniqueLoginName,occupation:'Occ'+newUniqueLoginName});cov_2ajrhtvu7f().s[124]++;request({method:"POST",json:true,body:params,url:makeFullUrl('/user')},function(error,response,body){cov_2ajrhtvu7f().f[43]++;cov_2ajrhtvu7f().s[125]++;assert(!error);cov_2ajrhtvu7f().s[126]++;assert.strictEqual(response.statusCode,200,'HTTP response status code 200');cov_2ajrhtvu7f().s[127]++;done();});});cov_2ajrhtvu7f().s[128]++;it('can reject a duplicate user',function(done){cov_2ajrhtvu7f().f[44]++;cov_2ajrhtvu7f().s[129]++;request=request.defaults({jar:true});var params=(cov_2ajrhtvu7f().s[130]++,{login_name:newUniqueLoginName,password:'weak2',first_name:'Fn'+newUniqueLoginName,last_name:'Ln'+newUniqueLoginName,location:'Loc'+newUniqueLoginName,description:'Desc'+newUniqueLoginName,occupation:'Occ'+newUniqueLoginName});cov_2ajrhtvu7f().s[131]++;request({method:"POST",json:true,body:params,url:makeFullUrl('/user')},function(error,response,body){cov_2ajrhtvu7f().f[45]++;cov_2ajrhtvu7f().s[132]++;assert(!error);cov_2ajrhtvu7f().s[133]++;assert.strictEqual(response.statusCode,400,'HTTP response status code 400');cov_2ajrhtvu7f().s[134]++;done();});});});});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlc3Npb25JbnB1dEFwaVRlc3QuanMiXSwibmFtZXMiOlsiYXNzZXJ0IiwicmVxdWlyZSIsImh0dHAiLCJhc3luYyIsIl8iLCJmcyIsInJlcXVlc3QiLCJjczE0Mm1vZGVscyIsInBvcnQiLCJob3N0IiwibWFrZUZ1bGxVcmwiLCJ1cmwiLCJhc3NlcnRFcXVhbERhdGVzIiwiZDEiLCJkMiIsIkRhdGUiLCJ2YWx1ZU9mIiwicmVtb3ZlTW9uZ29Qcm9wZXJ0aWVzIiwibW9kZWwiLCJjb3B5IiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwiX2lkIiwiX192IiwiZGVzY3JpYmUiLCJkb25lIiwiaXQiLCJlcnJvciIsInJlc3BvbnNlIiwiYm9keSIsInN0cmljdEVxdWFsIiwic3RhdHVzQ29kZSIsIm1ldGhvZCIsImpzb24iLCJsb2dpbl9uYW1lIiwicGFzc3dvcmQiLCJkZWZhdWx0cyIsImphciIsInBvc3QiLCJ1c2VyX2lkIiwicGhvdG9zIiwicGhvdG9zMiIsIm5ld0NvbW1lbnRUZXh0IiwicGhvdG9faWQiLCJvcmlnaW5hbFBob3RvIiwiY29tbWVudCIsIm5ld1Bob3RvIiwiZmluZCIsImNvbW1lbnRzIiwibGVuZ3RoIiwidW5pcXVlUGhvdG9OYW1lIiwiU3RyaW5nIiwiZm9ybURhdGEiLCJ1cGxvYWRlZHBob3RvIiwidmFsdWUiLCJjcmVhdGVSZWFkU3RyZWFtIiwiX19kaXJuYW1lIiwib3B0aW9ucyIsImZpbGVuYW1lIiwiY29udGVudFR5cGUiLCJvcHRpb25hbENhbGxiYWNrIiwiZXJyIiwiY29uc29sZSIsInAiLCJmaWxlX25hbWUiLCJtYXRjaCIsIm5ld1VuaXF1ZUxvZ2luTmFtZSIsInBhcmFtcyIsImZpcnN0X25hbWUiLCJsYXN0X25hbWUiLCJsb2NhdGlvbiIsImRlc2NyaXB0aW9uIiwib2NjdXBhdGlvbiJdLCJtYXBwaW5ncyI6IkFBQUEsYUFDQTtBQUNBO0FBQ0E7QUFDQSxHLENBQ0EsdUIsdXBoQkFVWTsyRkFSWixHQUFJQSxDQUFBQSxN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RyxTQUFTLENBQUUsS0FBT0gsa0JBSlQsQ0FLVEksUUFBUSxDQUFFLE1BQVFKLGtCQUxULENBTVRLLFdBQVcsQ0FBRSxPQUFTTCxrQkFOYixDQU9UTSxVQUFVLENBQUUsTUFBT04sa0JBUFYsQ0FBSCxDQUFWLENBSDZDLDBCQVk3QzdELE9BQU8sQ0FBQyxDQUNKMkIsTUFBTSxDQUFFLE1BREosQ0FFSkMsSUFBSSxDQUFFLElBRkYsQ0FHSkosSUFBSSxDQUFFc0MsTUFIRixDQUlKekQsR0FBRyxDQUFFRCxXQUFXLENBQUMsT0FBRCxDQUpaLENBQUQsQ0FLSixTQUFVa0IsS0FBVixDQUFpQkMsUUFBakIsQ0FBMkJDLElBQTNCLENBQWlDLG9EQUNoQzlCLE1BQU0sQ0FBQyxDQUFDNEIsS0FBRixDQUFOLENBRGdDLDBCQUVoQzVCLE1BQU0sQ0FBQytCLFdBQVAsQ0FBbUJGLFFBQVEsQ0FBQ0csVUFBNUIsQ0FBd0MsR0FBeEMsQ0FBNkMsK0JBQTdDLEVBRmdDLDBCQUdoQ04sSUFBSSxHQUNQLENBVE0sQ0FBUCxDQVdILENBdkJDLENBQUYsQ0F5QkgsQ0FwRE8sQ0FBUixDQXdESCxDQW5UTyxDQUFSIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuLypcbiAqIE1vY2hhIHRlc3Qgb2YgY3MxNDIgUHJvamVjdCAjNyB3ZWIgc2VydmVyIHNlc3Npb24gYW5kIGlucHV0IEFQSS4gIFRvIHJ1biB0eXBlXG4gKiAgIG5vZGVfbW9kdWxlcy8uYmluL21vY2hhIHNlc3Npb25JbnB1dEFwaVRlc3QuanNcbiAqL1xuLyoganNoaW50IG5vZGU6IHRydWUgKi9cblxudmFyIGFzc2VydCA9IHJlcXVpcmUoJ2Fzc2VydCcpO1xudmFyIGh0dHAgPSByZXF1aXJlKCdodHRwJyk7XG52YXIgYXN5bmMgPSByZXF1aXJlKCdhc3luYycpO1xudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcbnZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG52YXIgcmVxdWVzdCA9IHJlcXVpcmUoJ3JlcXVlc3QnKTtcblxudmFyIGNzMTQybW9kZWxzID0gcmVxdWlyZSgnLi4vbW9kZWxEYXRhL3Bob3RvQXBwLmpzJykuY3MxNDJtb2RlbHM7XG5cbnZhciBwb3J0ID0gMzAwMDtcbnZhciBob3N0ID0gJ2xvY2FsaG9zdCc7XG5cbmZ1bmN0aW9uIG1ha2VGdWxsVXJsKHVybCkge1xuXG4gICAgcmV0dXJuICdodHRwOi8vJyArIGhvc3QgKyAnOicgKyBwb3J0ICsgdXJsO1xufVxuXG5mdW5jdGlvbiBhc3NlcnRFcXVhbERhdGVzKGQxLCBkMikge1xuXG4gICAgcmV0dXJuIChuZXcgRGF0ZShkMSkudmFsdWVPZigpID09PSBuZXcgRGF0ZShkMikudmFsdWVPZigpKTtcbn1cbi8qXG4gKiBNb25nb0RCIGF1dG9tYXRpY2FsbHkgYWRkcyBzb21lIHByb3BlcnRpZXMgdG8gb3VyIG1vZGVscy4gV2UgYWxsb3dcbiAqIHRoZXNlIHRvIGFwcGVhciBieSByZW1vdmluZyB0aGVtIHdoZW4gYmVmb3JlIGNoZWNraW5nXG4gKiBmb3IgaW52YWxpZCBwcm9wZXJ0aWVzLiAgVGhpcyB3YXkgdGhlIG1vZGVscyBhcmUgcGVybWl0dGVkIGJ1dFxuICogbm90IHJlcXVpcmVkIHRvIGhhdmUgdGhlc2UgcHJvcGVydGllcy5cbiAqL1xuZnVuY3Rpb24gcmVtb3ZlTW9uZ29Qcm9wZXJ0aWVzKG1vZGVsKSB7XG4gICAgdmFyIGNvcHkgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG1vZGVsKSk7XG4gICAgZGVsZXRlIGNvcHkuX2lkO1xuICAgIGRlbGV0ZSBjb3B5Ll9fdjtcbiAgICByZXR1cm4gY29weTtcbn1cblxuZGVzY3JpYmUoJ0NTMTQyIFBob3RvIEFwcCBTZXNzaW9uIGFuZCBJbnB1dCBBUEkgLSAnLCBmdW5jdGlvbiAoKSB7XG5cblxuICAgIGRlc2NyaWJlKCd0ZXN0IC9hZG1pbi9sb2dpbiBhbmQgL2FkbWluL2xvZ291dCcsIGZ1bmN0aW9uIChkb25lKSB7XG5cblxuICAgICAgICBpdCgnZXJyb3JzIGdldHRpbmcgdGhlIGxpc3Qgb2YgdXNlciBpZiBub3QgbG9nZ2VkIGluJywgZnVuY3Rpb24gKGRvbmUpIHtcbiAgICAgICAgICAgIHJlcXVlc3QobWFrZUZ1bGxVcmwoJy91c2VyL2xpc3QnKSwgZnVuY3Rpb24gKGVycm9yLCByZXNwb25zZSwgYm9keSkge1xuICAgICAgICAgICAgICAgIGFzc2VydCghZXJyb3IpO1xuICAgICAgICAgICAgICAgIGFzc2VydC5zdHJpY3RFcXVhbChyZXNwb25zZS5zdGF0dXNDb2RlLCA0MDEsICdIVFRQIHJlc3BvbnNlIHN0YXR1cyBjb2RlIDQwMScpO1xuICAgICAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdlcnJvcnMgZ2V0dGluZyB1c2VyIGRldGFpbCBpZiBub3QgbG9nZ2VkIGluJywgZnVuY3Rpb24gKGRvbmUpIHtcbiAgICAgICAgICAgIHJlcXVlc3QobWFrZUZ1bGxVcmwoJy91c2VyLzEnKSwgZnVuY3Rpb24gKGVycm9yLCByZXNwb25zZSwgYm9keSkge1xuICAgICAgICAgICAgICAgIGFzc2VydCghZXJyb3IpO1xuICAgICAgICAgICAgICAgIGFzc2VydC5zdHJpY3RFcXVhbChyZXNwb25zZS5zdGF0dXNDb2RlLCA0MDEsICdIVFRQIHJlc3BvbnNlIHN0YXR1cyBjb2RlIDQwMScpO1xuICAgICAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuXG5cbiAgICAgICAgaXQoJ2Vycm9ycyBnZXR0aW5nIHBob3Rvc09mVXNlciBpZiBub3QgbG9nZ2VkIGluJywgZnVuY3Rpb24gKGRvbmUpIHtcbiAgICAgICAgICAgIHJlcXVlc3QobWFrZUZ1bGxVcmwoJy9waG90b3NPZlVzZXIvMScpLCBmdW5jdGlvbiAoZXJyb3IsIHJlc3BvbnNlLCBib2R5KSB7XG4gICAgICAgICAgICAgICAgYXNzZXJ0KCFlcnJvcik7XG4gICAgICAgICAgICAgICAgYXNzZXJ0LnN0cmljdEVxdWFsKHJlc3BvbnNlLnN0YXR1c0NvZGUsIDQwMSwgJ0hUVFAgcmVzcG9uc2Ugc3RhdHVzIGNvZGUgNDAxJyk7XG4gICAgICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdyZWplY3RzIGxvZ2lucyB0byBub24tZXhpc3RlbnQgbG9naW5fbmFtZScsIGZ1bmN0aW9uKGRvbmUpIHtcbiAgICAgICAgICAgIHJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAganNvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBib2R5OiB7bG9naW5fbmFtZTogXCJub3RWYWxpZFwifSxcbiAgICAgICAgICAgICAgICB1cmw6ICdodHRwOi8vJyArIGhvc3QgKyAnOicgKyBwb3J0ICsgJy9hZG1pbi9sb2dpbidcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvciwgcmVzcG9uc2UsIGJvZHkpIHtcbiAgICAgICAgICAgICAgICBhc3NlcnQuc3RyaWN0RXF1YWwocmVzcG9uc2Uuc3RhdHVzQ29kZSwgNDAwLCAnSFRUUCByZXNwb25zZSBzdGF0dXMgY29kZSA0MDEnKTtcbiAgICAgICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9KTtcblxuXG4gICAgICAgIGl0KCdyZWplY3RzIGxvZ2lucyB0byBleGlzdGluZyBsb2dpbl9uYW1lIHdpdGggd3JvbmcgcGFzc3dvcmQnLCBmdW5jdGlvbihkb25lKSB7XG4gICAgICAgICAgICByZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIGpzb246IHRydWUsXG4gICAgICAgICAgICAgICAgYm9keToge2xvZ2luX25hbWU6IFwidG9va1wiLCBwYXNzd29yZDogXCJ3cm9uZ1wifSxcbiAgICAgICAgICAgICAgICB1cmw6ICdodHRwOi8vJyArIGhvc3QgKyAnOicgKyBwb3J0ICsgJy9hZG1pbi9sb2dpbidcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvciwgcmVzcG9uc2UsIGJvZHkpIHtcbiAgICAgICAgICAgICAgICBhc3NlcnQuc3RyaWN0RXF1YWwocmVzcG9uc2Uuc3RhdHVzQ29kZSwgNDAwLCAnSFRUUCByZXNwb25zZSBzdGF0dXMgY29kZSA0MDAnKTtcbiAgICAgICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnYWNjZXB0cyBsb2dpbnMgdG8gZXhpc3RpbmcgbG9naW5fbmFtZSB3aXRoIGNvcnJlY3QgcGFzc3dvcmQnLCBmdW5jdGlvbihkb25lKSB7XG4gICAgICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdC5kZWZhdWx0cyh7amFyOiB0cnVlfSk7XG4gICAgICAgICAgICByZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIGpzb246IHRydWUsXG4gICAgICAgICAgICAgICAgYm9keToge2xvZ2luX25hbWU6IFwidG9va1wiLCBwYXNzd29yZDogXCJ3ZWFrXCJ9LFxuICAgICAgICAgICAgICAgIHVybDogbWFrZUZ1bGxVcmwoJy9hZG1pbi9sb2dpbicpXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IsIHJlc3BvbnNlLCBib2R5KSB7XG4gICAgICAgICAgICAgICAgYXNzZXJ0KCFlcnJvcik7XG4gICAgICAgICAgICAgICAgYXNzZXJ0LnN0cmljdEVxdWFsKHJlc3BvbnNlLnN0YXR1c0NvZGUsIDIwMCwgJ0hUVFAgcmVzcG9uc2Ugc3RhdHVzIGNvZGUgMjAwJyk7XG4gICAgICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ2NhbiBnZXQgdXNlciBsaXN0IHdoZW4gbG9nZ2VkIGluJywgZnVuY3Rpb24oZG9uZSkge1xuXG4gICAgICAgICAgICByZXF1ZXN0KG1ha2VGdWxsVXJsKCcvdXNlci9saXN0JyksIGZ1bmN0aW9uIChlcnJvciwgcmVzcG9uc2UsIGJvZHkpIHtcbiAgICAgICAgICAgICAgICBhc3NlcnQoIWVycm9yKTtcbiAgICAgICAgICAgICAgICBhc3NlcnQuc3RyaWN0RXF1YWwocmVzcG9uc2Uuc3RhdHVzQ29kZSwgMjAwLCAnSFRUUCByZXNwb25zZSBzdGF0dXMgY29kZSAyMDAnKTtcbiAgICAgICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnY2FuIGxvZ291dCB3aGVuIGxvZ2dlZCBpbicsIGZ1bmN0aW9uKGRvbmUpIHtcblxuICAgICAgICAgICAgcmVxdWVzdC5wb3N0KG1ha2VGdWxsVXJsKCcvYWRtaW4vbG9nb3V0JyksIGZ1bmN0aW9uIChlcnJvciwgcmVzcG9uc2UsIGJvZHkpIHtcbiAgICAgICAgICAgICAgICBhc3NlcnQoIWVycm9yKTtcbiAgICAgICAgICAgICAgICBhc3NlcnQuc3RyaWN0RXF1YWwocmVzcG9uc2Uuc3RhdHVzQ29kZSwgMjAwLCAnSFRUUCByZXNwb25zZSBzdGF0dXMgY29kZSAyMDAnKTtcbiAgICAgICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ3Rlc3QgL2NvbW1lbnRzT2ZQaG90by9pZCcsIGZ1bmN0aW9uIChkb25lKSB7XG5cbiAgICAgICAgdmFyIHVzZXJfaWQ7XG4gICAgICAgIHZhciBwaG90b3MsIHBob3RvczI7XG4gICAgICAgIHZhciBuZXdDb21tZW50VGV4dCA9IFwidGhpcyBpcyBhIG5ldyBjb21tZW50XCI7XG4gICAgICAgIHZhciBwaG90b19pZDtcbiAgICAgICAgdmFyIG9yaWdpbmFsUGhvdG87XG5cbiAgICAgICAgaXQoJ2NhbiBsb2dpbiBhcyB0b29rIGFuZCBnZXQgaWQnLCBmdW5jdGlvbihkb25lKSB7XG4gICAgICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdC5kZWZhdWx0cyh7amFyOiB0cnVlfSk7XG4gICAgICAgICAgICByZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIGpzb246IHRydWUsXG4gICAgICAgICAgICAgICAgYm9keToge2xvZ2luX25hbWU6IFwidG9va1wiLCBwYXNzd29yZDogXCJ3ZWFrXCJ9LFxuICAgICAgICAgICAgICAgIHVybDogbWFrZUZ1bGxVcmwoJy9hZG1pbi9sb2dpbicpXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IsIHJlc3BvbnNlLCBib2R5KSB7XG4gICAgICAgICAgICAgICAgYXNzZXJ0KCFlcnJvcik7XG4gICAgICAgICAgICAgICAgYXNzZXJ0LnN0cmljdEVxdWFsKHJlc3BvbnNlLnN0YXR1c0NvZGUsIDIwMCwgJ0hUVFAgcmVzcG9uc2Ugc3RhdHVzIGNvZGUgMjAwJyk7XG4gICAgICAgICAgICAgICAgdXNlcl9pZCA9IGJvZHkuX2lkO1xuICAgICAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdjYW4gZ2V0IHRvb2tzIHBob3RvcycsIGZ1bmN0aW9uKGRvbmUpIHtcbiAgICAgICAgICAgIHJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgICAgICBqc29uOiB0cnVlLFxuICAgICAgICAgICAgICAgIHVybDogbWFrZUZ1bGxVcmwoJy9waG90b3NPZlVzZXIvJyArIHVzZXJfaWQpXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IsIHJlc3BvbnNlLCBib2R5KSB7XG4gICAgICAgICAgICAgICAgYXNzZXJ0KCFlcnJvcik7XG4gICAgICAgICAgICAgICAgYXNzZXJ0LnN0cmljdEVxdWFsKHJlc3BvbnNlLnN0YXR1c0NvZGUsIDIwMCwgJ0hUVFAgcmVzcG9uc2Ugc3RhdHVzIGNvZGUgMjAwJyk7XG4gICAgICAgICAgICAgICAgcGhvdG9zID0gYm9keTtcbiAgICAgICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnY2FuIGFkZCBhIGNvbW1lbnQgdG8gdGhlIHRoZSBmaXJzdCBwaG90bycsIGZ1bmN0aW9uKGRvbmUpIHtcbiAgICAgICAgICAgIG9yaWdpbmFsUGhvdG8gPSBwaG90b3NbMF07XG4gICAgICAgICAgICBwaG90b19pZCA9IG9yaWdpbmFsUGhvdG8uX2lkO1xuICAgICAgICAgICAgcmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICBqc29uOiB0cnVlLFxuICAgICAgICAgICAgICAgIGJvZHk6IHtjb21tZW50OiBuZXdDb21tZW50VGV4dH0sXG4gICAgICAgICAgICAgICAgdXJsOiBtYWtlRnVsbFVybCgnL2NvbW1lbnRzT2ZQaG90by8nICsgcGhvdG9faWQpXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IsIHJlc3BvbnNlLCBib2R5KSB7XG4gICAgICAgICAgICAgICAgYXNzZXJ0KCFlcnJvcik7XG4gICAgICAgICAgICAgICAgYXNzZXJ0LnN0cmljdEVxdWFsKHJlc3BvbnNlLnN0YXR1c0NvZGUsIDIwMCwgJ0hUVFAgcmVzcG9uc2Ugc3RhdHVzIGNvZGUgMjAwJyk7XG4gICAgICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ2NhbiBnZXQgdG9va3MgcGhvdG9zIGFnYWluJywgZnVuY3Rpb24oZG9uZSkge1xuICAgICAgICAgICAgcmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgICAgIGpzb246IHRydWUsXG4gICAgICAgICAgICAgICAgdXJsOiBtYWtlRnVsbFVybCgnL3Bob3Rvc09mVXNlci8nICsgdXNlcl9pZClcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvciwgcmVzcG9uc2UsIGJvZHkpIHtcbiAgICAgICAgICAgICAgICBhc3NlcnQoIWVycm9yKTtcbiAgICAgICAgICAgICAgICBhc3NlcnQuc3RyaWN0RXF1YWwocmVzcG9uc2Uuc3RhdHVzQ29kZSwgMjAwLCAnSFRUUCByZXNwb25zZSBzdGF0dXMgY29kZSAyMDAnKTtcbiAgICAgICAgICAgICAgICBwaG90b3MyID0gYm9keTtcbiAgICAgICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9KTtcblxuICAgICAgICBpdCgncGhvdG8gaGFzIG9uZSBtb3JlIGNvbW1lbnQnLCBmdW5jdGlvbiAoZG9uZSkge1xuICAgICAgICAgICAgdmFyIG5ld1Bob3RvID0gXy5maW5kKHBob3RvczIsIHtfaWQ6IHBob3RvX2lkfSk7XG4gICAgICAgICAgICBhc3NlcnQobmV3UGhvdG8sICdDYW4gbm90IGZpbmQgcGhvdG8nKTtcbiAgICAgICAgICAgIGFzc2VydC5zdHJpY3RFcXVhbChuZXdQaG90by5jb21tZW50cy5sZW5ndGgsIG9yaWdpbmFsUGhvdG8uY29tbWVudHMubGVuZ3RoKzEpO1xuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnY2FuIGxvZ291dCB3aGVuIGxvZ2dlZCBpbicsIGZ1bmN0aW9uKGRvbmUpIHtcblxuICAgICAgICAgICAgcmVxdWVzdC5wb3N0KG1ha2VGdWxsVXJsKCcvYWRtaW4vbG9nb3V0JyksIGZ1bmN0aW9uIChlcnJvciwgcmVzcG9uc2UsIGJvZHkpIHtcbiAgICAgICAgICAgICAgICBhc3NlcnQoIWVycm9yKTtcbiAgICAgICAgICAgICAgICBhc3NlcnQuc3RyaWN0RXF1YWwocmVzcG9uc2Uuc3RhdHVzQ29kZSwgMjAwLCAnSFRUUCByZXNwb25zZSBzdGF0dXMgY29kZSAyMDAnKTtcbiAgICAgICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgndXBsb2FkIHBob3RvcyAtICBwb3N0IC9waG90b3MvbmV3JywgZnVuY3Rpb24gKGRvbmUpIHtcblxuICAgICAgICB2YXIgdXNlcl9pZDtcbiAgICAgICAgdmFyIHVuaXF1ZVBob3RvTmFtZSA9ICdwJyArIFN0cmluZyhuZXcgRGF0ZSgpLnZhbHVlT2YoKSkgKyAnLmpwZyc7XG5cbiAgICAgICAgaXQoJ2NhbiBsb2dpbiBhcyB0b29rIGFuZCBnZXQgaWQnLCBmdW5jdGlvbiAoZG9uZSkge1xuICAgICAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3QuZGVmYXVsdHMoe2phcjogdHJ1ZX0pO1xuICAgICAgICAgICAgcmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICBqc29uOiB0cnVlLFxuICAgICAgICAgICAgICAgIGJvZHk6IHtsb2dpbl9uYW1lOiBcInRvb2tcIiwgcGFzc3dvcmQ6IFwid2Vha1wifSxcbiAgICAgICAgICAgICAgICB1cmw6IG1ha2VGdWxsVXJsKCcvYWRtaW4vbG9naW4nKVxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yLCByZXNwb25zZSwgYm9keSkge1xuICAgICAgICAgICAgICAgIGFzc2VydCghZXJyb3IpO1xuICAgICAgICAgICAgICAgIGFzc2VydC5zdHJpY3RFcXVhbChyZXNwb25zZS5zdGF0dXNDb2RlLCAyMDAsICdIVFRQIHJlc3BvbnNlIHN0YXR1cyBjb2RlIDIwMCcpO1xuICAgICAgICAgICAgICAgIHVzZXJfaWQgPSBib2R5Ll9pZDtcbiAgICAgICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnY2FuIHVwbG9hZCBhIHBob3RvJywgZnVuY3Rpb24gKGRvbmUpIHtcblxuICAgICAgICAgICAgdmFyIGZvcm1EYXRhID0ge1xuICAgICAgICAgICAgICAgIHVwbG9hZGVkcGhvdG86IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZzLmNyZWF0ZVJlYWRTdHJlYW0oX19kaXJuYW1lICsgJy90ZXN0UGhvdG8uanBnJyksXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiB1bmlxdWVQaG90b05hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2ltYWdlL2pwZydcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXF1ZXN0LnBvc3Qoe1xuICAgICAgICAgICAgICAgIHVybDogbWFrZUZ1bGxVcmwoJy9waG90b3MvbmV3JyksXG4gICAgICAgICAgICAgICAgZm9ybURhdGE6IGZvcm1EYXRhXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiBvcHRpb25hbENhbGxiYWNrKGVyciwgcmVzcG9uc2UsIGJvZHkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoJ3VwbG9hZCBmYWlsZWQ6JywgZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYXNzZXJ0LnN0cmljdEVxdWFsKHJlc3BvbnNlLnN0YXR1c0NvZGUsIDIwMCwgJ0hUVFAgcmVzcG9uc2Ugc3RhdHVzIGNvZGUgMjAwJyk7XG4gICAgICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdjYW4gZ2V0IHRoZSB1cGxvYWRlZCBwaG90byAnLCBmdW5jdGlvbihkb25lKSB7XG4gICAgICAgICAgICByZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgICAgICAganNvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICB1cmw6IG1ha2VGdWxsVXJsKCcvcGhvdG9zT2ZVc2VyLycgKyB1c2VyX2lkKVxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yLCByZXNwb25zZSwgYm9keSkge1xuICAgICAgICAgICAgICAgIGFzc2VydCghZXJyb3IpO1xuICAgICAgICAgICAgICAgIGFzc2VydC5zdHJpY3RFcXVhbChyZXNwb25zZS5zdGF0dXNDb2RlLCAyMDAsICdIVFRQIHJlc3BvbnNlIHN0YXR1cyBjb2RlIDIwMCcpO1xuICAgICAgICAgICAgICAgIHZhciBuZXdQaG90byA9IF8uZmluZChib2R5LCAgZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHAuZmlsZV9uYW1lLm1hdGNoKHVuaXF1ZVBob3RvTmFtZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYXNzZXJ0KG5ld1Bob3RvLCBcIkNhbiBub3QgZmluZCB1cGxvYWQgcGhvdG9cIik7XG4gICAgICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSk7XG5cblxuICAgIH0pO1xuXG5cbiAgICBkZXNjcmliZSgncmVnaXN0ZXIgdXNlciAtIHBvc3QgdG8gL3VzZXInLCBmdW5jdGlvbiAoZG9uZSkge1xuICAgICAgICB2YXIgbmV3VW5pcXVlTG9naW5OYW1lID0gJ3UnICsgU3RyaW5nKG5ldyBEYXRlKCkudmFsdWVPZigpKTtcbiAgICAgICAgaXQoJ2NhbiBjcmVhdGUgYSBuZXcgdXNlcicsIGZ1bmN0aW9uKGRvbmUpIHtcbiAgICAgICAgICAgIHJlcXVlc3QgPSByZXF1ZXN0LmRlZmF1bHRzKHtqYXI6IHRydWV9KTtcblxuICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBsb2dpbl9uYW1lOiBuZXdVbmlxdWVMb2dpbk5hbWUsXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICd3ZWFrMicsXG4gICAgICAgICAgICAgICAgZmlyc3RfbmFtZTogJ0ZuJyArIG5ld1VuaXF1ZUxvZ2luTmFtZSxcbiAgICAgICAgICAgICAgICBsYXN0X25hbWU6ICdMbicgKyBuZXdVbmlxdWVMb2dpbk5hbWUsXG4gICAgICAgICAgICAgICAgbG9jYXRpb246ICdMb2MnICsgbmV3VW5pcXVlTG9naW5OYW1lLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRGVzYycgKyBuZXdVbmlxdWVMb2dpbk5hbWUsXG4gICAgICAgICAgICAgICAgb2NjdXBhdGlvbjogJ09jYycrIG5ld1VuaXF1ZUxvZ2luTmFtZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAganNvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBib2R5OiBwYXJhbXMsXG4gICAgICAgICAgICAgICAgdXJsOiBtYWtlRnVsbFVybCgnL3VzZXInKVxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yLCByZXNwb25zZSwgYm9keSkge1xuICAgICAgICAgICAgICAgIGFzc2VydCghZXJyb3IpO1xuICAgICAgICAgICAgICAgIGFzc2VydC5zdHJpY3RFcXVhbChyZXNwb25zZS5zdGF0dXNDb2RlLCAyMDAsICdIVFRQIHJlc3BvbnNlIHN0YXR1cyBjb2RlIDIwMCcpO1xuICAgICAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdjYW4gcmVqZWN0IGEgZHVwbGljYXRlIHVzZXInLCBmdW5jdGlvbihkb25lKSB7XG4gICAgICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdC5kZWZhdWx0cyh7amFyOiB0cnVlfSk7XG5cbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgbG9naW5fbmFtZTogbmV3VW5pcXVlTG9naW5OYW1lLFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAnd2VhazInLFxuICAgICAgICAgICAgICAgIGZpcnN0X25hbWU6ICdGbicgKyBuZXdVbmlxdWVMb2dpbk5hbWUsXG4gICAgICAgICAgICAgICAgbGFzdF9uYW1lOiAnTG4nICsgbmV3VW5pcXVlTG9naW5OYW1lLFxuICAgICAgICAgICAgICAgIGxvY2F0aW9uOiAnTG9jJyArIG5ld1VuaXF1ZUxvZ2luTmFtZSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0Rlc2MnICsgbmV3VW5pcXVlTG9naW5OYW1lLFxuICAgICAgICAgICAgICAgIG9jY3VwYXRpb246ICdPY2MnKyBuZXdVbmlxdWVMb2dpbk5hbWVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIGpzb246IHRydWUsXG4gICAgICAgICAgICAgICAgYm9keTogcGFyYW1zLFxuICAgICAgICAgICAgICAgIHVybDogbWFrZUZ1bGxVcmwoJy91c2VyJylcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvciwgcmVzcG9uc2UsIGJvZHkpIHtcbiAgICAgICAgICAgICAgICBhc3NlcnQoIWVycm9yKTtcbiAgICAgICAgICAgICAgICBhc3NlcnQuc3RyaWN0RXF1YWwocmVzcG9uc2Uuc3RhdHVzQ29kZSwgNDAwLCAnSFRUUCByZXNwb25zZSBzdGF0dXMgY29kZSA0MDAnKTtcbiAgICAgICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG5cblxufSk7XG4iXX0=